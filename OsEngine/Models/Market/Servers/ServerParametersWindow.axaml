<Window
    x:Class="OsEngine.Views.Market.Servers.ServerParametersWindow"
    xmlns="https://github.com/avaloniaui"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:inputs="using:OsEngine.Models.Entity"
    xmlns:vm="using:OsEngine.Views.Market.Servers"
    Title="Server settings"
    Width="600"
    Height="640"
    x:DataType="vm:ServerParametersWindow"
    CanResize="False"
    Icon="/Assets/OsLogo.ico"
    WindowStartupLocation="CenterScreen">

    <Window.DataTemplates>

        <DataTemplate DataType="{x:Type inputs:Input+Bool}">
            <ToggleSwitch
                HorizontalAlignment="Center"
                IsChecked="{Binding Value, Mode=TwoWay, UpdateSourceTrigger=Explicit}"
                OnContent=""
                OffContent=""
                Loaded="Template_Loaded" />
        </DataTemplate>

        <DataTemplate DataType="{x:Type inputs:Input+Int}">
            <NumericUpDown
                Width="nan"
                HorizontalContentAlignment="Center"
                Increment="1"
                Loaded="Template_Loaded"
                ShowButtonSpinner="False"
                ValueChanged="NumericUpDown_ValueChanged"
                Value="{Binding Value, Mode=TwoWay, UpdateSourceTrigger=Explicit}" />
        </DataTemplate>

        <DataTemplate DataType="{x:Type inputs:Input+Decimal}">
            <NumericUpDown
                Width="nan"
                HorizontalContentAlignment="Center"
                Loaded="Template_Loaded"
                ShowButtonSpinner="False"
                ValueChanged="NumericUpDown_ValueChanged"
                Value="{Binding Value, Mode=TwoWay, UpdateSourceTrigger=Explicit}" />
        </DataTemplate>

        <DataTemplate DataType="{x:Type inputs:Input+Options}">
            <ComboBox
                ItemsSource="{Binding Values}"
                Loaded="Template_Loaded"
                SelectedValue="{Binding Value, Mode=TwoWay, UpdateSourceTrigger=Explicit}" />
        </DataTemplate>

        <DataTemplate DataType="{x:Type inputs:Input+String}">
            <TextBox
                HorizontalAlignment="Stretch"
                HorizontalContentAlignment="Center"
                Loaded="Template_Loaded" Text="{Binding Value, Mode=TwoWay, UpdateSourceTrigger=Explicit}" />
        </DataTemplate>

    </Window.DataTemplates>


    <Border Margin="10">
        <Grid RowDefinitions="*,Auto,Auto">
            <DataGrid
                Name="Settings"
                Grid.Row="0"
                ItemsSource="{Binding Inputs}">
                <DataGrid.Columns>

                    <DataGridTextColumn
                        Width="2*"
                        Binding="{Binding Name}"
                        CanUserSort="False"
                        Header="Name" />

                    <DataGridTemplateColumn
                        Width="*"
                        CanUserSort="False" Header="">
                        <DataGridTemplateColumn.CellTemplate>
                            <DataTemplate>
                                <ContentControl Content="{Binding}" />
                            </DataTemplate>
                        </DataGridTemplateColumn.CellTemplate>
                    </DataGridTemplateColumn>

                </DataGrid.Columns>

            </DataGrid>
            <!--  TODO:  -->
            <!-- <Button Grid.Row="1" Content="Show Securities" /> -->

            <Grid Grid.Row="2" ColumnDefinitions="200,*,200">
                <Button
                    Grid.Column="0"
                    Width="200"
                    Margin="5"
                    HorizontalAlignment="Left"
                    HorizontalContentAlignment="Center"
                    Click="Cancel"
                    Content="Cancel" />

                <!--  TODO:  -->
                <Button
                    Grid.Column="1"
                    Margin="5,10"
                    HorizontalAlignment="Stretch"
                    Content="Show Securities" />

                <Button
                    Grid.Column="2"
                    Width="200"
                    Margin="5"
                    HorizontalAlignment="Right"
                    HorizontalContentAlignment="Center"
                    Command="{Binding Accept}"
                    Content="Accept" />
            </Grid>
        </Grid>
    </Border>

</Window>
